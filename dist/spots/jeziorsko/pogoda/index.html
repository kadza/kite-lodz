<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kite Spots</title>
    <link
  rel="preload"
  href="/assets/fonts/montserrat-regular.woff2"
  as="font"
  type="font/woff2"
  crossorigin
/>
<link rel="stylesheet" href="/assets/fonts.css" />
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        colors: {
          textColor: "#39563e",
          hoverColor: "#c7a370",
        },
        fontFamily: {
          montserrat: ['"Montserrat"', "sans-serif"],
        },
      },
    },
  };
</script>
<style>
  body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("/assets/background.webp");
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    opacity: 0.9;
    z-index: -1;
  }
  /* Hide scrollbar for Chrome, Safari and Opera */
  .overflow-y-auto::-webkit-scrollbar {
    display: none;
  }

  /* Hide scrollbar for IE, Edge and Firefox */
  .overflow-y-auto {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }
</style>


  </head>
  <body class="h-full m-0 p-0 flex flex-col items-center text-textColor overflow-hidden">
    <nav
  class="h-[3rem] md:h-[6rem] flex items-center fixed top-0 left-0 right-0 z-10"
>
  <div
    class="container mx-auto flex uppercase justify-between items-center px-4"
  >
    <span class="hidden md:flex">
      <a
        href="/"
        class="font-montserrat text-[2rem] hover:text-hoverColor underline decoration-2 underline-offset-8"
        >Kite Łódź</a
      >
    </span>
    <span class="font-montserrat text-[2rem] md:hidden">
      Kite Łódź
    </span>

    <div class="hidden md:flex space-x-16 font-montserrat text-[2rem]">
      <a href="/spots/jeziorsko/" class="hover:text-hoverColor nav-link" data-page="jeziorsko">Jeziorsko</a>
      <a href="/spots/jeziorsko/spoty/" class="hover:text-hoverColor nav-link" data-page="spoty">Spoty</a>
      <a href="/spots/jeziorsko/pogoda/" class="hover:text-hoverColor nav-link" data-page="pogoda">Pogoda</a>
    </div>

    <div class="md:hidden">
      <button id="menu-btn" class="text-textColor focus:outline-none">
        <svg
          class="w-8 h-8"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16m-7 6h7"
          ></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Sub navigation for Jeziorsko pages (mobile only) -->
  <div class="md:hidden h-[3rem] flex items-center fixed top-[3rem] left-0 right-0 z-10 bg-white border-t border-gray-200">
    <div class="container mx-auto flex uppercase px-4 space-x-8 font-montserrat text-[1.5rem]">
      <a href="/spots/jeziorsko/" class="hover:text-hoverColor nav-link" data-page="jeziorsko">Jeziorsko</a>
      <a href="/spots/jeziorsko/spoty/" class="hover:text-hoverColor nav-link" data-page="spoty">Spoty</a>
      <a href="/spots/jeziorsko/pogoda/" class="hover:text-hoverColor nav-link" data-page="pogoda">Pogoda</a>
    </div>
  </div>
</nav>

<!-- Mobile Menu -->
<div
  id="mobile-menu"
  class="hidden fixed top-0 left-0 w-full h-full bg-white bg-opacity-90 z-20"
>
  <div
    class="flex flex-col items-center justify-center h-full font-montserrat text-[2rem] space-y-8"
  >
    <a
      href="/"
      class="hover:text-hoverColor underline decoration-2 underline-offset-8"
      >Kite Łódź</a
    >
    <a href="/spots/jeziorsko/" class="hover:text-hoverColor">Jeziorsko</a>
    <a href="/spots/jeziorsko/spoty/" class="hover:text-hoverColor">Spoty</a>
    <a href="/spots/jeziorsko/pogoda/" class="hover:text-hoverColor">Pogoda</a>
  </div>
</div>



    <div class="container flex flex-col flex-grow pt-[6rem] h-full">
      
<div
  class="flex-grow p-4 md:p-8 bg-white bg-opacity-50 md:rounded-lg overflow-y-auto"
>
  <div class="w-full flex flex-col items-start">
    <div class="w-full mb-4">
      <h3 class="text-xl mb-2">Aktualna pogoda*</h3>
      <div id="current-weather" class="flex flex-col">
        <div class="flex space-x-2">
          <p>Kierunek wiatru:</p>
          <p id="wind-dir">-</p>
        </div>
        <div class="flex space-x-2">
          <p>Prędkość wiatru:</p>
          <p id="wind-speed">-</p>
        </div>
        <div class="flex space-x-2">
          <p>Temperatura:</p>
          <p id="temperature">-</p>
        </div>
      </div>
    </div>
    <h3 class="text-xl mb-2">Prognozy</h3>
    <img id="meteo-forecast" src="" class="border-0 mb-4" />
    <div class="w-full mb-4">
      <script src="https://www.windfinder.com/widget/forecast/js/jeziorsko_popow?unit_wave=m&unit_rain=mm&unit_temperature=c&unit_wind=kts&unit_pressure=hPa&days=4&show_day=1&show_waves=0"></script>
      <noscript>
        <a
          rel="nofollow"
          href="https://www.windfinder.com/forecast/jeziorsko_popow?utm_source=forecast&utm_medium=web&utm_campaign=homepageweather&utm_content=noscript-forecast"
          >Wind forecast for Jeziorsko Popów</a
        >
        provided by
        <a
          rel="nofollow"
          href="https://www.windfinder.com?utm_source=forecast&utm_medium=web&utm_campaign=homepageweather&utm_content=noscript-logo"
          >windfinder.com</a
        >
      </noscript>
    </div>
    <div class="w-full mb-4">
      <iframe
        class="w-full h-[450px]"
        src="https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=mm&metricTemp=°C&metricWind=kt&zoom=11&overlay=wind&product=ecmwf&level=surface&lat=51.792&lon=18.906&detailLat=51.83&detailLon=18.728&detail=true"
        frameborder="0"
      ></iframe>
    </div>
    <div class="w-full">
      <div id="wg_fwdg_3644_100_1752307649736"></div>
      <script>
        (function (window, document) {
          var loader = function () {
            var arg = [
              "s=3644",
              "m=100",
              "uid=wg_fwdg_3644_100_1752307649736",
              "wj=knots",
              "tj=c",
              "waj=m",
              "tij=cm",
              "odh=0",
              "doh=24",
              "fhours=240",
              "hrsm=2",
              "vt=forecasts",
              "lng=en",
              "idbs=1",
              "p=WINDSPD,GUST,SMER,TMPE,FLHGT,CDC,APCP1s,RATING",
            ];
            var script = document.createElement("script");
            var tag = document.getElementsByTagName("script")[0];
            script.src =
              "https://www.windguru.cz/js/widget.php?" + arg.join("&");
            tag.parentNode.insertBefore(script, tag);
          };
          window.addEventListener
            ? window.addEventListener("load", loader, false)
            : window.attachEvent("onload", loader);
        })(window, document);
      </script>
    </div>
  </div>
  <div class="w-full text-left text-xs mt-4">
    <p>
      * Aktualna pogoda jest pobierana ze strony
      <a
        href="http://meteor.iung.pulawy.pl/view2.php?u=Warta"
        target="_blank"
        class="underline"
        >pulawy.pl</a
      >
    </p>
  </div>
</div>
<div class="min-h-[2rem] md:min-h-[4rem]"></div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const now = new Date();
    const delayedDate = new Date(now.getTime() - 21600000); // Subtract 6 hours

    const options = {
      timeZone: "Europe/Warsaw",
      year: "numeric",
      month: "2-digit",
      day: "2-digit",
      hour: "2-digit",
      hour12: false,
    };
    const formatter = new Intl.DateTimeFormat("en-CA", options);
    const parts = formatter.formatToParts(delayedDate);

    const year = parts.find((p) => p.type === "year").value;
    const month = parts.find((p) => p.type === "month").value;
    const day = parts.find((p) => p.type === "day").value;
    const hour = parseInt(parts.find((p) => p.type === "hour").value, 10);

    const forecastHourSlot = Math.floor(hour / 6) * 6;
    const formattedHour = String(forecastHourSlot).padStart(2, "0");

    const fdate = `${year}${month}${day}${formattedHour}`;

    const forecastUrl = `https://old.meteo.pl/um/metco/mgram_pict.php?ntype=0u&fdate=${fdate}&row=416&col=206&lang=pl`;

    document.getElementById("meteo-forecast").src = forecastUrl;

    async function fetchWeather() {
      try {
        const response = await fetch(
          "https://meteor-proxy.lukasz-kujawiak.workers.dev/",
        );
        const text = await response.text();

        const windDirMatch = text.match(/windDir:\s*([\d.-]+)/);
        const windSpeedMatch = text.match(/windSpeed:\s*([\d.-]+)/);
        const temperatureIntMatch = text.match(/temperatureInt:\s*([\d.-]+)/);

        const windDir = windDirMatch ? parseFloat(windDirMatch[1]) : null;
        const windSpeedMps = windSpeedMatch
          ? parseFloat(windSpeedMatch[1])
          : null;
        const temperatureInt = temperatureIntMatch
          ? parseFloat(temperatureIntMatch[1]).toFixed(2)
          : "Błąd";

        function toTextualDescription(degree) {
          if (degree > 337.5 || degree <= 22.5) return "N";
          if (degree > 22.5 && degree <= 67.5) return "NE";
          if (degree > 67.5 && degree <= 112.5) return "E";
          if (degree > 112.5 && degree <= 157.5) return "SE";
          if (degree > 157.5 && degree <= 202.5) return "S";
          if (degree > 202.5 && degree <= 247.5) return "SW";
          if (degree > 247.5 && degree <= 292.5) return "W";
          if (degree > 292.5 && degree <= 337.5) return "NW";
          return "Błąd";
        }

        const windSpeedKnots =
          windSpeedMps !== null ? (windSpeedMps * 1.94384).toFixed(2) : "Błąd";
        const windSpeedMpsFormatted =
          windSpeedMps !== null ? windSpeedMps.toFixed(2) : "Błąd";

        document.getElementById("wind-dir").textContent =
          windDir !== null ? toTextualDescription(windDir) : "Błąd";
        document.getElementById("wind-speed").textContent =
          `${windSpeedMpsFormatted} m/s (${windSpeedKnots} kt)`;
        document.getElementById("temperature").textContent =
          `${temperatureInt} °C`;
      } catch (error) {
        console.error("Error fetching weather data:", error);
        document.getElementById("wind-dir").textContent = "Błąd";
        document.getElementById("wind-speed").textContent = "Błąd";
        document.getElementById("temperature").textContent = "Błąd";
      }
    }

    fetchWeather();
  });
</script>


    </div>

    <script>
  document.addEventListener("DOMContentLoaded", function () {
    const menuBtn = document.getElementById("menu-btn");
    const mobileMenu = document.getElementById("mobile-menu");

    if (menuBtn && mobileMenu) {
      menuBtn.addEventListener("click", function () {
        mobileMenu.classList.toggle("hidden");
      });
    }

    // Add active state styling to navigation links
    const currentPath = window.location.pathname;

    // Check for Jeziorsko pages
    if (currentPath.includes('/spots/jeziorsko/')) {
      const navLinks = document.querySelectorAll('.nav-link');

      navLinks.forEach(link => {
        const pageType = link.getAttribute('data-page');

        if (pageType === 'jeziorsko' && (currentPath === '/spots/jeziorsko/' || currentPath === '/spots/jeziorsko/index.html')) {
          link.classList.add('underline', 'decoration-2', 'underline-offset-8');
        } else if (pageType === 'spoty' && currentPath.includes('/spoty')) {
          link.classList.add('underline', 'decoration-2', 'underline-offset-8');
        } else if (pageType === 'pogoda' && currentPath.includes('/pogoda')) {
          link.classList.add('underline', 'decoration-2', 'underline-offset-8');
        }
      });
    }
  });
</script>


  </body>
</html>
